import{q as _,r,j as e,Y as M}from"./app-BhVfn1oG.js";import{d as N}from"./index-DQyQdIxH.js";import{L as P}from"./Layout-BLsYlLAs.js";import{P as L}from"./ReactToastify-CqVbXWEe.js";import{F as O}from"./index-CHXlp1va.js";import{B as u}from"./react-toastify.esm-CKf9o2XU.js";import{L as $}from"./index-CoD__97l.js";import"./NotificationList-D7J_jy85.js";const q=({isOpen:m,onClose:d,categories:l})=>{const{errors:s}=_().props,[c,o]=r.useState(1),[i,h]=r.useState(""),[n,y]=r.useState(null),[p,v]=r.useState(""),[b,C]=r.useState(""),[w,k]=r.useState(null),[j,g]=r.useState(null),[t,f]=r.useState(""),[S,F]=r.useState(""),A=()=>o(c+1),D=()=>o(c-1),E=a=>{a.preventDefault();const x=new FormData;x.append("name",i),x.append("category_id",p),x.append("value",n),x.append("description",b),x.append("location",S),x.append("attachment",w),x.append("photo",j),x.append("manufacturer",t),N.Inertia.post("/assets",x,{onSuccess:()=>{d()}})},I=()=>{switch(c){case 1:return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Add Asset - Step 1"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:i,onChange:a=>h(a.target.value),className:"border rounded p-2 w-full"}),s.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Category"}),e.jsxs("select",{value:p,onChange:a=>v(a.target.value),className:"border rounded p-2 w-full",children:[e.jsx("option",{value:"",disabled:!0,children:"Select Category"}),l.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]}),s.category_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.category_id})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Price (Fcfa)"}),e.jsx("input",{type:"number",value:n,placeholder:"5700",onChange:a=>y(a.target.value),className:"border rounded p-2 w-full"}),s.value&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.value}),e.jsx("span",{children:"Fcfa"})]}),e.jsx("button",{onClick:A,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Next"})]});case 2:return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Add Asset - Step 2"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:b,onChange:a=>C(a.target.value),className:"border rounded p-2 w-full"}),s.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.description})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Attachment"}),e.jsx("input",{type:"file",onChange:a=>k(a.target.files[0]),className:"border rounded p-2 w-full"}),s.attachment&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.attachment})]}),e.jsx("button",{onClick:D,className:"mr-2 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Back"}),e.jsx("button",{onClick:A,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Next"})]});case 3:return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Add Asset - Step 3"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Photo"}),e.jsx("input",{type:"file",onChange:a=>g(a.target.files[0]),className:"border rounded p-2 w-full"}),s.photo&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.photo})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Manufacturer"}),e.jsx("input",{type:"text",value:t,onChange:a=>f(a.target.value),className:"border rounded p-2 w-full"}),s.manufacturer&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.manufacturer})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:S,onChange:a=>F(a.target.value),className:"border rounded p-2 w-full"}),s.location&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:s.location})]}),e.jsx("button",{onClick:D,className:"mr-2 bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400",children:"Back"}),e.jsx("button",{onClick:E,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Submit"})]});default:return null}};return e.jsx(e.Fragment,{children:m&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white rounded shadow-lg p-6 w-full max-w-lg mx-auto relative",children:[e.jsx("button",{onClick:d,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700",children:e.jsx(O,{size:20})}),I()]})})})},z=({isOpen:m,onClose:d,asset:l,categories:s})=>{const[c,o]=r.useState({name:"",category_id:"",value:"",description:""});r.useEffect(()=>{l&&o({name:l.name,category_id:l.category_id,value:l.value,description:l.description})},[l]);const i=n=>{o({...c,[n.target.name]:n.target.value})},h=n=>{n.preventDefault(),N.Inertia.put(`/assets/${l.id}`,c,{onSuccess:()=>{u.success("Asset updated successfully!"),d()},onError:()=>{u.error("Failed to update asset.")}})};return!m||!l?null:e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-4 rounded shadow-md w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Asset"}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",children:"Name"}),e.jsx("input",{type:"text",name:"name",value:c.name,onChange:i,className:"w-full px-3 py-2 border rounded",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",children:"Category"}),e.jsxs("select",{name:"category_id",value:c.category_id,onChange:i,className:"w-full px-3 py-2 border rounded",required:!0,children:[e.jsx("option",{value:"",children:"Select a category"}),s.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",children:"Price (Fcfa)"}),e.jsx("input",{type:"number",name:"value",value:c.value,onChange:i,className:"w-full px-3 py-2 border rounded"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700",children:"Description"}),e.jsx("textarea",{name:"description",value:c.description,onChange:i,className:"w-full px-3 py-2 border rounded"})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:d,className:"bg-gray-500 text-white px-4 py-2 rounded mr-2 hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Save"})]})]})]})})},B=({message:m,onConfirm:d,onCancel:l})=>e.jsxs("div",{children:[e.jsx("p",{children:m}),e.jsxs("div",{className:"flex justify-end mt-2",children:[e.jsx("button",{className:"bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 mr-2",onClick:()=>{d(),u.dismiss()},children:"Confirm"}),e.jsx("button",{className:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",onClick:()=>{l(),u.dismiss()},children:"Cancel"})]})]}),K=({assets:m,activeCategory:d,categories:l,notifications:s,user:c})=>{const[o,i]=r.useState(d),[h,n]=r.useState(!1),[y,p]=r.useState(!1),[v,b]=r.useState(null);console.log(s);const C=t=>{u(e.jsx(B,{message:"Are you sure you want to delete this asset?",onConfirm:()=>{N.Inertia.delete(`/assets/${t}`,{onSuccess:()=>u.success("Asset deleted successfully!"),onError:()=>u.error("Failed to delete asset.")})},onCancel:()=>u.info("Delete action canceled.")}),{position:"top-center",autoClose:!1,closeOnClick:!1,draggable:!1,closeButton:!1})},w=t=>{b(t),p(!0)},k=t=>{i(t),N.Inertia.get("/assets",{category:t})},j=t=>t==="all"?"All Assets":t.charAt(0).toUpperCase()+t.slice(1),g=m.data;return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Assets"}),e.jsx(P,{notifications:s,user:c,children:e.jsxs("div",{className:"container mx-auto p-4",children:[e.jsxs("div",{className:"sticky top-0 bg-white z-10 shadow-md p-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("button",{onClick:()=>n(!0),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Create + Asset"}),e.jsx("div",{className:"flex space-x-4",children:["all","equipment","parts","tools"].map(t=>e.jsx("button",{onClick:()=>k(t),className:`px-4 py-2 rounded ${o===t?"bg-blue-500 text-white":"bg-gray-200 text-black"}`,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),e.jsxs("h6",{className:"text-xl text-gray-500 font-light font-serif mb-4",children:["Assets /",e.jsx("code",{className:"text-sm font-bold text-gray-700 font-serif",children:j(o)})]})]}),g.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("p",{className:"text-6xl font-bold shadow-lg animate-pulse text-green-500",children:["There Are no ",j(o)," in the system"]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table-auto min-w-full bg-white shadow-md rounded mb-2",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2",children:"Photo"}),e.jsx("th",{className:"py-2 px-4 bg-gray-100 border-b text-left",children:"Name"}),e.jsx("th",{className:"py-2 px-4 bg-gray-100 border-b text-left",children:"Category"}),e.jsx("th",{className:"py-2 px-4 bg-gray-100 border-b text-left",children:"Description"}),e.jsx("th",{className:"py-2 px-4 bg-gray-100 border-b text-left",children:"Price"}),e.jsx("th",{className:"py-2 px-4 bg-gray-100 border-b text-left",children:"Actions"})]})}),e.jsx("tbody",{children:g.map(t=>{var f;return e.jsxs("tr",{children:[e.jsx("td",{className:"border px-4 py-2 w-16",children:t.photo&&e.jsx("img",{src:`/storage/${t.photo.file_path}`,alt:t.name,className:"w-auto h-auto rounded-md object-cover"})}),e.jsx("td",{className:"py-2 px-4 border-b",children:e.jsx($,{href:`/assets/${t.id}`,className:"text-blue-500 hover:underline",children:t.name})}),e.jsx("td",{className:"py-2 px-4 border-b",children:((f=t.category)==null?void 0:f.name)||"N/A"}),e.jsx("td",{className:"py-2 px-4 border-b",children:t.description||"No description available"}),e.jsxs("td",{className:"py-2 px-4 border-b",children:[e.jsx("span",{children:t.value?t.value.toLocaleString():"N/A"})," Fcfa"]}),e.jsxs("td",{className:"py-2 px-4 border-b flex-initial",children:[e.jsx("button",{onClick:()=>w(t),className:"bg-green-500 text-white px-4 py-1 rounded mr-2 dark:bg-green-700",children:"Edit"}),e.jsx("button",{onClick:()=>C(t.id),className:"bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",children:"Delete"})]})]},t.id)})})]})}),e.jsx(L,{links:m.links})]}),e.jsx(q,{isOpen:h,onClose:()=>n(!1),categories:l}),e.jsx(z,{isOpen:y,onClose:()=>p(!1),asset:v,categories:l})]})})]})};export{K as default};
