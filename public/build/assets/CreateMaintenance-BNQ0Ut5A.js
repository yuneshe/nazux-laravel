import{r as o,j as e}from"./app-BhVfn1oG.js";import{d as m}from"./index-DQyQdIxH.js";import{B as u}from"./react-toastify.esm-CKf9o2XU.js";import"./index-CoD__97l.js";const D=({equipments:n,errors:d,notifications:k})=>{const[s,l]=o.useState({title:"",description:"",equipment_id:"",procedures:null,frequency:"daily",start_date:"",parts:[],tools:[]}),[h,x]=o.useState(""),[p,g]=o.useState(n.filter(a=>a.category&&a.category.name.toUpperCase()==="PARTS")),[b,y]=o.useState(n.filter(a=>a.category&&a.category.name.toUpperCase()==="TOOLS")),f=a=>{a.preventDefault();const t=new FormData;Object.keys(s).forEach(r=>{Array.isArray(s[r])?s[r].forEach((w,C)=>{t.append(`${r}[${C}]`,w)}):t.append(r,s[r])}),s.procedures&&t.append("procedures",s.procedures),m.Inertia.post(route("maintenance.store"),t,{onSuccess:()=>u.success("Maintenance created successfully!"),onError:()=>u.error("There was an error creating the maintenance."),headers:{"Content-Type":"multipart/form-data"}})},j=a=>{x(a.target.value),g(n.filter(t=>t.category&&t.category.name.toUpperCase()==="PARTS"&&t.name.toLowerCase().includes(t.target.value.toLowerCase()))),y(n.filter(t=>t.category&&t.category.name.toUpperCase()==="TOOLS"&&t.name.toLowerCase().includes(t.target.value.toLowerCase())))},i=(a,t)=>{const r=new Set(s[a]);r.has(t)?r.delete(t):r.add(t),l({...s,[a]:Array.from(r)})},v=()=>{m.Inertia.get(route("maintenance.index"))},N=n.filter(a=>a.category&&a.category.name.toUpperCase()==="EQUIPMENT"),c=a=>d&&d[a]?e.jsx("span",{className:"text-red-600 text-sm",children:d[a]}):null;return e.jsxs("div",{className:"max-w-3xl mx-auto p-4 sm:p-6 lg:p-8 bg-white shadow-md rounded-md",children:[e.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Create Maintenance"}),e.jsx("button",{onClick:v,className:"px-4 py-2 bg-gray-500 text-white font-semibold rounded-md shadow-sm hover:bg-gray-600",children:"Go Back"})]}),c("title"),c("description"),c("equipment_id"),c("procedures"),c("frequency"),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",value:s.title,onChange:a=>l({...s,title:a.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:s.description,onChange:a=>l({...s,description:a.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Equipment"}),e.jsxs("select",{value:s.equipment_id,onChange:a=>l({...s,equipment_id:a.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"",children:"Select Equipment"}),N.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Procedures"}),e.jsx("input",{type:"file",onChange:a=>l({...s,procedures:a.target.files[0]}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Frequency"}),e.jsxs("select",{value:s.frequency,onChange:a=>l({...s,frequency:a.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),e.jsx("input",{type:"date",value:s.start_date||"",onChange:a=>l({...s,start_date:a.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Search Parts/Tools"}),e.jsx("input",{type:"text",value:h,onChange:j,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm",placeholder:"Search parts or tools"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Parts"}),e.jsx("div",{className:"mt-1 grid grid-cols-2 gap-4",children:p.map(a=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.parts.includes(a.id),onChange:()=>i("parts",a.id),className:"mr-2"}),e.jsx("span",{children:a.name})]},a.id))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tools"}),e.jsx("div",{className:"mt-1 grid grid-cols-2 gap-4",children:b.map(a=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:s.tools.includes(a.id),onChange:()=>i("tools",a.id),className:"mr-2"}),e.jsx("span",{children:a.name})]},a.id))})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white font-semibold rounded-md shadow-sm hover:bg-blue-600",children:"Create"})})]})]})};export{D as default};
